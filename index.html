/* Mystic Portal — single-file React app Author: ChatGPT (GPT-5 Thinking mini)

What this is:

A single-file React component (default export) that renders a surreal, interactive, "otherworldly" website.

Modern techniques: React hooks, canvas particle system, WebAudio procedural oscillator, Framer Motion for UI animation, Tailwind CSS classes for styling.

Designed to be dropped into a Vite + React + Tailwind project as src/App.jsx (or any React project). All behavior lives in this file.


Dependencies (install in your project):

react, react-dom (provided by your project)

framer-motion


Optional but recommended: Tailwind CSS for the look shown below. If you don't have Tailwind, basic fallback styles still apply.

How to use:

1. Create a Vite React app: npm create vite@latest mystic-portal -- --template react or use your favorite starter.


2. Install: npm install framer-motion


3. (Optional) Setup Tailwind in the project for exact styling.


4. Replace src/App.jsx with this file's contents, then npm run dev.



Notes:

All code is self-contained in this file (no external assets). Audio and visuals are generated programmatically.

Plays safe, browser-native audio (user gesture required on some browsers).


Enjoy. Make it weirder if you want — but beware the portal. */

import React, { useRef, useEffect, useState, useCallback } from "react"; import { motion, AnimatePresence } from "framer-motion";

// ---------- Utility: simple PRNG & Perlin-like noise (value noise) function seededRng(seed) { let s = seed % 2147483647; if (s <= 0) s += 2147483646; return () => (s = (s * 16807) % 2147483647) / 2147483647; }

function lerp(a, b, t) { return a + (b - a) * t; }

// ---------- Particle System (Canvas 2D) function useParticles(canvasRef, opts = {}) { useEffect(() => { const canvas = canvasRef.current; if (!canvas) return; const ctx = canvas.getContext("2d"); let w = (canvas.width = canvas.clientWidth * devicePixelRatio); let h = (canvas.height = canvas.clientHeight * devicePixelRatio); const rng = seededRng(1337);

const baseCount = Math.floor((opts.count || 120) * (Math.min(window.innerWidth, 1400) / 900));

const particles = new Array(baseCount).fill(0).map(() => ({
  x: rng() * w,
  y: rng() * h,
  vx: (rng() - 0.5) * 0.3,
  vy: (rng() - 0.5) * 0.3,
  size: 1 + rng() * 3,
  hue: Math.floor(200 + rng() * 120),
  life: 100 + rng() * 200,
}));

let last = performance.now();
let running = true;
let attract = null; // {x,y,intensity}

function onResize() {
  w = (canvas.width = canvas.clientWidth * devicePixelRatio);
  h = (canvas.height = canvas.clientHeight * devicePixelRatio);
}
window.addEventListener("resize", onResize);

function frame(t) {
  if (!running) return;
  const dt = Math.min(40, t - last) / 16.6667; // ~60fps normalized
  last = t;

  ctx.clearRect(0, 0, w, h);

  // subtle backdrop blur glow
  ctx.save();
  ctx.fillStyle = "rgba(6,6,12,0.35)";
  ctx.fillRect(0, 0, w, h);
  ctx.restore();

  for (const p of particles) {
    // noise-like wander via sin/cos
    p.vx += Math.sin((p.x + t * 0.001) * 0.001) * 0.002 * dt;
    p.vy += Math.cos((p.y + t * 0.001) * 0.001) * 0.002 * dt;

    // attraction
    if (attract) {
      const dx = attract.x - p.x;
      const dy = attract.y - p.y;
      const d2 = dx * dx + dy * dy + 1;
      const f = (attract.intensity || 0.05) / d2;
      p.vx += dx * f * dt;
      p.vy += dy * f * dt;
    }

    p.x += p.vx * dt * 16;
    p.y += p.vy * dt * 16;

    // wrap
    if (p.x < -50) p.x = w + 50;
    if (p.x > w + 50) p.x = -50;
    if (p.y < -50) p.y = h + 50;
    if (p.y > h + 50) p.y = -50;

    // draw
    const grd = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.size * 8);
    grd.addColorStop(0, `hsla(${p.hue},90%,65%,0.95)`);
    grd.addColorStop(0.25, `hsla(${(p.hue + 60) % 360},90%,55%,0.35)`);
    grd.addColorStop(1, `rgba(10,10,12,0)`);

    ctx.beginPath();
    ctx.fillStyle = grd;
    ctx.arc(p.x, p.y, p.size * devicePixelRatio, 0, Math.PI * 2);
    ctx.fill();
  }

  requestAnimationFrame(frame);
}

requestAnimationFrame(frame);

// public controls
const api = {
  stop: () => (running = false),
  resume: () => {
    if (!running) {
      running = true;
      last = performance.now();
      requestAnimationFrame(frame);
    }
  },
  attractTo: (x, y, intensity = 0.05) => (attract = { x: x * devicePixelRatio, y: y * devicePixelRatio, intensity }),
  clearAttract: () => (attract = null),
  spawnBurst: (x, y, count = 30) => {
    for (let i = 0; i < count; i++) {
      particles.push({
        x: x * devicePixelRatio,
        y: y * devicePixelRatio,
        vx: (Math.random() - 0.5) * 6,
        vy: (Math.random() - 0.5) * 6,
        size: 1 + Math.random() * 6,
        hue: 150 + Math.random() * 160,
        life: 100 + Math.random() * 200,
      });
    }
  },
};

// attach to element for access
canvas._mysticApi = api;

return () => {
  running = false;
  window.removeEventListener("resize", onResize);
};

}, [canvasRef, opts.count]); }

// ---------- Audio: procedural cosmic hum using WebAudio function useCosmicAudio(enabled) { useEffect(() => { if (!enabled) return; if (!window.AudioContext && !window.webkitAudioContext) return; const AudioCtx = window.AudioContext || window.webkitAudioContext; const ctx = new AudioCtx(); const master = ctx.createGain(); master.gain.value = 0.02; // gentle master.connect(ctx.destination);

// multiple detuned oscillators
const baseFreq = 55 + Math.random() * 30;
const oscs = [];
for (let i = 0; i < 4; i++) {
  const o = ctx.createOscillator();
  o.type = i % 2 === 0 ? "sine" : "triangle";
  o.frequency.value = baseFreq * (1 + (i - 1.5) * 0.03);
  const g = ctx.createGain();
  g.gain.value = 0.04 / (i + 1);
  o.connect(g);
  g.connect(master);
  o.start();
  oscs.push({ o, g });
}

// slow LFO to modulate filter
const lfo = ctx.createOscillator();
lfo.type = "sine";
lfo.frequency.value = 0.06;
const lfoGain = ctx.createGain();
lfoGain.gain.value = 1200;
const filter = ctx.createBiquadFilter();
filter.type = "lowpass";
filter.frequency.value = 800;
master.disconnect();
master.connect(filter);
filter.connect(ctx.destination);
lfo.connect(lfoGain);
lfoGain.connect(filter.frequency);
lfo.start();

// gently ramp volume
master.gain.setTargetAtTime(0.02, ctx.currentTime, 0.8);

return () => {
  oscs.forEach(({ o }) => o.stop());
  lfo.stop();
  ctx.close();
};

}, [enabled]); }

// ---------- Main App export default function MysticPortalApp() { const canvasRef = useRef(null); useParticles(canvasRef, { count: 140 });

const [portalOpen, setPortalOpen] = useState(false); const [audioOn, setAudioOn] = useState(false); useCosmicAudio(audioOn && portalOpen);

const [cursor, setCursor] = useState({ x: -9999, y: -9999 });

useEffect(() => { function move(e) { setCursor({ x: e.clientX, y: e.clientY }); const api = canvasRef.current && canvasRef.current._mysticApi; if (api) api.attractTo(e.clientX, e.clientY, 0.1); } function leave() { setCursor({ x: -9999, y: -9999 }); const api = canvasRef.current && canvasRef.current._mysticApi; if (api) api.clearAttract(); } window.addEventListener("mousemove", move); window.addEventListener("mouseleave", leave); return () => { window.removeEventListener("mousemove", move); window.removeEventListener("mouseleave", leave); }; }, []);

// click to spawn burst and toggle micro-events const onClick = useCallback((e) => { const api = canvasRef.current && canvasRef.current._mysticApi; if (api) api.spawnBurst(e.clientX, e.clientY, 40); // tiny visual pulse: briefly open portal state setPortalOpen((p) => !p); // try to auto-enable audio on click (some browsers require gesture) if (!audioOn) setAudioOn(true); }, [audioOn]);

// generate ephemeral 'prophecy' lines procedurally function genProphecy(seed) { const fragments = [ "the moon remembers your name", "salt & static will form a map", "two clocks will agree at midnight", "a door opens where a picture once hung", "listen: the walls are whispering code", "stars will bargain for a memory", "the river writes in binary", ]; const r = seededRng(seed || Date.now()); return new Array(3) .fill(0) .map(() => fragments[Math.floor(r() * fragments.length)]) .join(" — "); }

const [prophecy, setProphecy] = useState(() => genProphecy(42));

// keyboard easter egg: press P to regenerate useEffect(() => { function onKey(e) { if (e.key.toLowerCase() === "p") setProphecy(genProphecy(Math.floor(Math.random() * 999999))); if (e.key === " ") { // space toggles portal setPortalOpen((p) => !p); setAudioOn(true); } } window.addEventListener("keydown", onKey); return () => window.removeEventListener("keydown", onKey); }, []);

return ( <div className="min-h-screen w-full relative bg-gradient-to-b from-[#06020a] to-[#07142a] text-white overflow-hidden font-sans"> {/* Canvas background */} <canvas ref={canvasRef} className="absolute inset-0 w-full h-full pointer-events-none" />

{/* Main content */}
  <div className="relative z-20 px-6 py-10 max-w-5xl mx-auto flex flex-col items-center gap-8">
    <motion.h1
      initial={{ y: -20, opacity: 0 }}
      animate={{ y: 0, opacity: 1 }}
      transition={{ type: "spring", stiffness: 120, damping: 14 }}
      className="text-4xl md:text-6xl font-extrabold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 via-fuchsia-300 to-cyan-300 drop-shadow-lg"
    >
      Mystic Portal
    </motion.h1>

    <motion.p
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ delay: 0.2 }}
      className="max-w-2xl text-center text-sm md:text-lg text-slate-200/90"
    >
      An experimental playground — particles, generative prophecy, and a gentle cosmic hum. Click anywhere to interact. Press <code>P</code> for a new prophecy.
    </motion.p>

    <div className="w-full flex flex-col md:flex-row items-center gap-4">
      <div className="flex-1 backdrop-blur-md bg-white/3 border border-white/6 rounded-2xl p-4 shadow-2xl">
        <div className="flex items-center justify-between">
          <div>
            <div className="text-xs uppercase text-slate-300/90">Current Vision</div>
            <div className="mt-2 font-mono text-sm text-slate-100">{prophecy}</div>
          </div>

          <div className="flex gap-2 items-center">
            <button
              className={`px-4 py-2 rounded-xl text-sm font-semibold shadow-sm transition-transform active:scale-95 ${portalOpen ? "bg-emerald-400/20 border border-emerald-300/40" : "bg-white/6 border border-white/6"}`}
              onClick={() => setPortalOpen((p) => !p)}
            >
              {portalOpen ? "Close Portal" : "Open Portal"}
            </button>

            <button
              className={`px-3 py-2 rounded-lg text-sm ${audioOn ? "bg-rose-400/20 border border-rose-300/30" : "bg-white/6 border border-white/6"}`}
              onClick={() => setAudioOn((a) => !a)}
            >
              {audioOn ? "Audio On" : "Audio Off"}
            </button>
          </div>
        </div>

        <div className="mt-4 grid grid-cols-2 gap-3">
          <button
            className="col-span-2 px-4 py-3 rounded-xl bg-gradient-to-r from-violet-500/30 to-cyan-300/20 border border-white/6 text-sm"
            onClick={() => setProphecy(genProphecy(Math.floor(Math.random() * 99999)))}
          >
            Regenerate Prophecy
          </button>

          <button
            className="px-3 py-2 rounded-lg text-sm bg-white/4 border border-white/6"
            onClick={() => {
              // small page glitch: warp CSS variables
              document.documentElement.style.setProperty("--warp", `${Math.random() * 6 - 3}deg`);
              setTimeout(() => document.documentElement.style.removeProperty("--warp"), 1200);
            }}
          >
            Warp Reality
          </button>

          <button
            className="px-3 py-2 rounded-lg text-sm bg-white/4 border border-white/6"
            onClick={() => {
              // spawn a central burst
              const api = canvasRef.current && canvasRef.current._mysticApi;
              if (api) api.spawnBurst(window.innerWidth / 2, window.innerHeight / 2, 120);
            }}
          >
            Summon Bloom
          </button>
        </div>
      </div>

      {/* Visualizer card */}
      <div className="w-64 md:w-72 h-40 rounded-2xl p-3 backdrop-blur-md bg-gradient-to-br from-white/3 to-white/5 border border-white/6 flex flex-col justify-between">
        <div className="text-xs uppercase text-slate-300">Portal Status</div>
        <div className="flex items-center gap-3">
          <div className={`w-10 h-10 rounded-full ${portalOpen ? "bg-emerald-400/80" : "bg-slate-700/60"} shadow-inner`} />
          <div>
            <div className="text-sm font-semibold">{portalOpen ? "Open — energy high" : "Closed — dormant"}</div>
            <div className="text-xs text-slate-300">Particles: dynamic • Audio: {audioOn ? "enabled" : "disabled"}</div>
          </div>
        </div>

        <div className="mt-2 text-xs text-slate-300">Tip: click anywhere on the page to interact with the scene.</div>
      </div>
    </div>

    <div className="mt-6 w-full grid grid-cols-1 md:grid-cols-3 gap-4">
      <Card title="Archive" subtitle="Time-stamped echoes">
        <small className="text-slate-300">This project stores nothing — every prophecy is ephemeral. Press <code>P</code> to create a new one.</small>
      </Card>

      <Card title="Tuning" subtitle="Adjust the hum">
        <small className="text-slate-300">Audio is procedural. Toggle audio to hear a gentle evolving drone. Use the spacebar to toggle the portal.</small>
      </Card>

      <Card title="Fork & Remix" subtitle="GitHub ready">
        <small className="text-slate-300">Drop this file into a Vite React + Tailwind project and push to GitHub. Make it weirder. PRs that add more weirdness accepted.</small>
      </Card>
    </div>

    <footer className="text-xs text-slate-400/80 mt-6">Made by an algorithm with questionable morals. Click, type, and explore — but don't feed the glowing things after midnight.</footer>
  </div>

  {/* Portal overlay (animated) */}
  <AnimatePresence>
    {portalOpen && (
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        transition={{ duration: 0.6 }}
        className="pointer-events-none absolute inset-0 z-10 flex items-center justify-center"
      >
        <motion.div
          initial={{ scale: 0.6 }}
          animate={{ scale: 1, rotate: 3 }}
          exit={{ scale: 0.6, opacity: 0 }}
          transition={{ type: "spring", stiffness: 80, damping: 16 }}
          style={{
            width: 420,
            height: 420,
            borderRadius: 220,
            boxShadow: "0 40px 120px rgba(80,60,160,0.15), inset 0 0 80px rgba(120,80,200,0.12)",
            background: "radial-gradient(ellipse at center, rgba(255,255,255,0.06), rgba(10,8,18,0.05))",
            border: "1px solid rgba(255,255,255,0.04)",
            backdropFilter: "blur(8px) saturate(140%)",
          }}
        />
      </motion.div>
    )}
  </AnimatePresence>

  {/* invisible click layer to capture interactions */}
  <div
    onClick={onClick}
    className="absolute inset-0 z-40"
    style={{ cursor: portalOpen ? "crosshair" : "crosshair" }}
  />

  {/* small global style adjustments for warp */}
  <style>{`
    :root{ --warp: 0deg }
    .warp-rotate{ transform: rotate(var(--warp)); }
  `}</style>
</div>

); }

// ---------- Small UI Card component included inline function Card({ title, subtitle, children }) { return ( <div className="backdrop-blur-md bg-white/3 border border-white/6 rounded-2xl p-4"> <div className="flex items-center justify-between"> <div> <div className="text-sm font-semibold">{title}</div> <div className="text-xs text-slate-300">{subtitle}</div> </div> </div> <div className="mt-3 text-sm text-slate-200/90">{children}</div> </div> ); }

